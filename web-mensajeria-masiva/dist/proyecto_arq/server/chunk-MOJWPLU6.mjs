import './polyfills.server.mjs';
import{$ as x,A as L,B as y,C as kt,Ca as Lt,D as d,E as _t,F as r,G as a,Ga as Wt,H as u,Ha as zt,I as Ct,Ia as qt,J as vt,K as w,Ka as K,L as m,La as $t,M as g,N as F,O as A,P as I,Q as s,R as f,S as U,T as pe,U as ue,V as D,W as E,X as O,Y as se,Z as M,_ as v,a as Re,aa as W,b as Vt,c as Ft,ca as Nt,d as Te,e as At,f as It,g as je,ga as Rt,h as ae,i as T,ia as Tt,j as ht,k as de,ka as bt,l as G,la as we,m as b,ma as Y,n as ft,na as jt,o as R,oa as yt,p as gt,q as _,qa as j,r as C,ra as z,s as De,sa as me,t as V,ta as Be,u as Ee,ua as k,v as X,va as q,w as c,wa as Bt,x as p,xa as Ut,y as Oe,ya as Ht,z as Se,za as Gt}from"./chunk-F477LJB2.mjs";import{a as P,b as H,h as Ne}from"./chunk-5XUXGTUW.mjs";var he=class i{loginClickSource=new Re;loginClick$=this.loginClickSource.asObservable();emitLoginClick(){this.loginClickSource.next()}static \u0275fac=function(e){return new(e||i)};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ue=class i{constructor(t){this.loginService=t}onLoginClick(){this.loginService.emitLoginClick()}static \u0275fac=function(e){return new(e||i)(p(he))};static \u0275cmp=b({type:i,selectors:[["app-navbar"]],standalone:!0,features:[M],decls:15,vars:0,consts:[[1,"bar"],[1,"nav"],[1,"logo"],["href",""],["src","assets/img/logo.png","alt","logo"],[1,"links"],[1,"login"],["id","login",3,"click"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),u(4,"img",4),a()(),r(5,"div",5)(6,"a",3),s(7,"Inicio"),a(),r(8,"a",3),s(9,"Sobre nosotros"),a(),r(10,"a",3),s(11,"Planes"),a()(),r(12,"div",6)(13,"button",7),m("click",function(){return n.onLoginClick()}),s(14,"Login"),a()()()())},styles:[".bar[_ngcontent-%COMP%]{display:flex;height:70px;width:100%;justify-content:center;background-color:#000}.bar[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex;justify-content:space-between;align-items:center;width:95%}.nav[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;height:60px;background-size:cover}.nav[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:45px}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer}.links[_ngcontent-%COMP%]{display:flex;width:300px;justify-content:space-between}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-family:Poppins-medium;transition:.3s}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer;color:#f1e64e;transition:.3s}.bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:40px;width:120px;border-radius:7px;border:2px solid#f1e64e;color:#fff;background-color:#000;font-family:poppins-bold;font-size:15px;transition:.3s}.bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f1e64e;transition:.3s;color:#000;border:2px solid white}"]})};var He=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-footer"]],standalone:!0,features:[M],decls:10,vars:0,consts:[[1,"footer"],["href",""]],template:function(e,n){e&1&&(r(0,"footer",0)(1,"p"),s(2,"\xA9 2024 Massive. Todos los derechos reservados."),a(),r(3,"nav")(4,"a",1),s(5,"Inicio"),a(),r(6,"a",1),s(7,"Sobre nosotros"),a(),r(8,"a",1),s(9,"Planes"),a()()())},styles:[".footer[_ngcontent-%COMP%]{font-family:poppins-bold;display:flex;flex-direction:column;background-color:#f1e64e;color:#000;text-align:center;padding:1rem;position:relative;bottom:0;align-items:center}nav[_ngcontent-%COMP%]{width:25%;display:flex;justify-content:space-between;font-family:poppins-medium}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer}"]})};var Ge=class i{constructor(t){this.router=t}irDestinatarios(){this.router.navigate(["/destinatarios"])}irDifusion(){this.router.navigate(["/difusion"])}irCampanas(){this.router.navigate(["/campanas"])}static \u0275fac=function(e){return new(e||i)(p(K))};static \u0275cmp=b({type:i,selectors:[["app-sidebar"]],standalone:!0,features:[M],decls:19,vars:0,consts:[[1,"container"],[1,"sidebar"],[1,"perfil"],[1,"img"],["src","assets/img/user.jpg","alt","foto"],[1,"nombre"],[1,"editarPerfil"],[1,"separator"],[1,"link"],[1,"lista_destinatarios",3,"click"],[1,"mis_campanas",3,"click"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),u(4,"img",4),a(),r(5,"div",5)(6,"h4"),s(7,"Nombre Apellido"),a()(),r(8,"button",6),s(9,"Editar perfil"),a()(),u(10,"hr",7),r(11,"nav")(12,"div",8)(13,"h3"),s(14,"Mi espacio de trabajo"),a(),r(15,"button",9),m("click",function(){return n.irDestinatarios()}),s(16," Mis destinatarios"),a(),r(17,"button",10),m("click",function(){return n.irCampanas()}),s(18,"Mis campa\xF1as"),a()()()()())},styles:[".container[_ngcontent-%COMP%]{height:110vh;display:flex;align-items:center}.sidebar[_ngcontent-%COMP%]{border-top-right-radius:10px;border-bottom-right-radius:10px;display:flex;flex-direction:column;width:250px;height:95%;background-color:#000;border-right:2px solid #f1e64e;border-top:2px solid #f1e64e;border-bottom:2px solid #f1e64e}.sidebar[_ngcontent-%COMP%]   .perfil[_ngcontent-%COMP%]{margin-top:30px;display:flex;flex-direction:column;align-items:center}.perfil[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{border:3px solid #f1e64e;height:70px;width:70px;background-size:cover;border-radius:100%;overflow:hidden}.perfil[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%}.perfil[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:poppins-medium}.perfil[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:poppins-regular;border-radius:7px;background-color:#000;border:1px solid#f1e64e;transition:.5s}.perfil[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f1e64e;border-color:#000;transition:.5s;cursor:pointer;color:#000}.separator[_ngcontent-%COMP%]{align-self:center;border:none;height:1px;background-color:#ccc;margin:20px 0;width:95%}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{height:80%;width:100%;display:flex}nav[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{align-items:center;width:100%;height:30%;display:flex;flex-direction:column;justify-content:space-between}.link[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:poppins-medium}.link[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:poppins-Regular;height:35px;background-color:#000;width:80%;border:1px solid#f1e64e;border-radius:7px;transition:.5s}.link[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f1e64e;border-color:#000;color:#000;transition:.5s;cursor:pointer}"]})};function En(i,t){i&1&&(r(0,"div"),u(1,"app-sidebar"),a())}var We=class i{constructor(t){this.router=t;this.router.events.subscribe(e=>{if(e instanceof Wt){let n=this.router.url.split("?")[0],o=["/dashboard","/campanas","/destinatarios","/reportes"];this.showSidebar=o.includes(n)}})}title="proyecto_arq";showSidebar=!1;static \u0275fac=function(e){return new(e||i)(p(K))};static \u0275cmp=b({type:i,selectors:[["app-root"]],standalone:!0,features:[M],decls:6,vars:1,consts:[[1,"main-layout"],[4,"ngIf"],[1,"content"]],template:function(e,n){e&1&&(u(0,"app-navbar"),r(1,"div",0),y(2,En,2,0,"div",1),r(3,"div",2),u(4,"router-outlet"),a()(),u(5,"app-footer")),e&2&&(c(2),d("ngIf",n.showSidebar))},dependencies:[k,z,qt,Ue,He,Ge],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}@font-face{font-family:Poppins-Bold;src:url(/assets/fonts/Poppins-Bold.ttf) format("woff2");font-weight:400;font-style:normal}@font-face{font-family:Poppins-medium;src:url(/assets/fonts/Poppins-Medium.ttf) format("woff2");font-weight:400;font-style:normal}@font-face{font-family:Poppins-Regular;src:url(/assets/fonts/Poppins-Regular.ttf) format("woff2");font-weight:400;font-style:normal}@font-face{font-family:Poppins-Light;src:url(/assets/fonts/Poppins-Light.ttf) format("woff2");font-weight:400;font-style:normal}@font-face{font-family:Poppins-Semibold;src:url(/assets/fonts/Poppins-SemiBold.ttf) format("woff2");font-weight:400;font-style:normal}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100vh}app-navbar[_ngcontent-%COMP%]{flex:0 0 auto}.main-layout[_ngcontent-%COMP%]{display:flex;flex:1}.content[_ngcontent-%COMP%]{flex:1;padding:20px;overflow-y:auto}app-footer[_ngcontent-%COMP%]{flex:0 0 auto}']})};var On=["popup"],Sn=["closeBtn"],wn=["registro"],Pn=["volver"],Vn=["cont"],Fn=["cont1"],ze=class i{constructor(t,e){this.loginService=t;this.router=e;this.loginClickSubscription=this.loginService.loginClick$.subscribe(()=>{this.openPopup(),this.openRegistro(),this.volverLogin()})}loginClickSubscription;popup;closeBtn;registro;volver;cont;cont1;ngAfterViewInit(){this.popup&&this.closeBtn?this.closeBtn.nativeElement.addEventListener("click",()=>{this.popup.nativeElement.style.display="none"}):console.error("Los elementos no fueron encontrados")}openPopup(){this.popup&&(this.popup.nativeElement.style.display="flex")}openRegistro(){this.registro&&this.cont&&this.cont1?this.registro.nativeElement.addEventListener("click",()=>{this.cont.nativeElement.style.display="none",this.cont1.nativeElement.style.display="flex"}):console.log("no se encontro #registro ni #cont1")}volverLogin(){this.volver&&this.cont&&this.cont1?this.volver.nativeElement.addEventListener("click",()=>{this.cont.nativeElement.style.display="flex",this.cont1.nativeElement.style.display="none"}):console.log("no se encontro #volver ni #cont1")}ngOnDestroy(){this.loginClickSubscription&&this.loginClickSubscription.unsubscribe()}goToDashboard(){this.router.navigate(["/dashboard"])}static \u0275fac=function(e){return new(e||i)(p(he),p(K))};static \u0275cmp=b({type:i,selectors:[["app-home"]],viewQuery:function(e,n){if(e&1&&(F(On,5),F(Sn,5),F(wn,5),F(Pn,5),F(Vn,5),F(Fn,5)),e&2){let o;A(o=I())&&(n.popup=o.first),A(o=I())&&(n.closeBtn=o.first),A(o=I())&&(n.registro=o.first),A(o=I())&&(n.volver=o.first),A(o=I())&&(n.cont=o.first),A(o=I())&&(n.cont1=o.first)}},decls:84,vars:0,consts:[["popup",""],["closeBtn",""],["cont",""],["registro",""],["cont1",""],["volver",""],[1,"page"],[1,"portada"],[1,"info"],[1,"desc"],[1,"gal"],[1,"card"],["src","assets/img/solucion.jpg","alt",""],["src","assets/img/rules.jpg","alt",""],["src","assets/img/optimizacion.jpg","alt",""],["id","popup",1,"popup"],[1,"cerrar"],["id","closeBtn"],["id","cont",1,"cont"],["for","email"],["id","email","type","text"],["for","pass"],["id","pass","type","password"],["type","submit",3,"click"],["id","registro"],["id","cont1",1,"cont1"],["for","nombre"],["id","nombre","type","text"],["for","apellido"],["id","apellido","type","text"],["type","submit"],["id","volver"]],template:function(e,n){if(e&1){let o=w();r(0,"div",6)(1,"div",7)(2,"div",8)(3,"h1"),s(4,"Massive"),a(),r(5,"h3"),s(6,"T\xFA das la visi\xF3n,"),u(7,"br"),s(8,"nosotros la hacemos llegar a todo el mundo."),a()()(),r(9,"div",9)(10,"div",8)(11,"h3"),s(12,"\xBFPor qu\xE9 trabajar con nostros?"),a(),r(13,"h4"),s(14,"En Massive, entendemos la importancia de una comunicaci\xF3n efectiva y personalizada para hacer crecer tu negocio. Nuestro servicio de env\xEDo masivo de emails y SMS est\xE1 dise\xF1ado para que conectes con tu audiencia de manera directa, eficiente y sin complicaciones."),a()()(),r(15,"div",10)(16,"div",11),u(17,"img",12),r(18,"div",8)(19,"h4"),s(20,"Soluciones a la medida"),a(),r(21,"p"),s(22,"Adaptamos nuestras estrategias y plataformas seg\xFAn las necesidades de tu empresa, asegurando que tu mensaje llegue de forma \xF3ptima y a los destinatarios correctos. "),a()()(),r(23,"div",11),u(24,"img",13),r(25,"div",8)(26,"h4"),s(27,"Cumplimiento normativo"),a(),r(28,"p"),s(29,"Nos tomamos muy en serio las regulaciones y normativas relacionadas con la privacidad y protecci\xF3n de datos, asegurando que tus campa\xF1as se desarrollen dentro del marco legal."),a()()(),r(30,"div",11),u(31,"img",14),r(32,"div",8)(33,"h4"),s(34,"An\xE1lisis y optimizaci\xF3n"),a(),r(35,"p"),s(36,"Ofrecemos herramientas avanzadas de seguimiento y an\xE1lisis para que puedas medir la efectividad de tus campa\xF1as en tiempo real, ajustando estrategias para obtener los mejores resultados."),a()()()(),r(37,"div",15,0)(39,"div",16)(40,"h3",17,1),s(42,"X"),a()(),r(43,"div",18,2)(45,"h1"),s(46,"Iniciar sesi\xF3n"),a(),r(47,"form")(48,"label",19),s(49,"Email"),a(),u(50,"input",20),r(51,"label",21),s(52,"Contrase\xF1a"),a(),u(53,"input",22),r(54,"button",23),m("click",function(){return _(o),C(n.goToDashboard())}),s(55,"Ingresar"),a()(),r(56,"a",24,3),s(58,"\xBFNo tienes una cuenta?"),a()(),r(59,"div",25,4)(61,"h1"),s(62,"Crear cuenta"),a(),r(63,"form")(64,"label",26),s(65,"Nombre"),a(),u(66,"input",27),r(67,"label",28),s(68,"Apellido"),a(),u(69,"input",29),r(70,"label",19),s(71,"Email"),a(),u(72,"input",20),r(73,"label",21),s(74,"Contrase\xF1a"),a(),u(75,"input",22),r(76,"label",21),s(77,"Repetir contrase\xF1a"),a(),u(78,"input",22),r(79,"button",30),s(80,"Crear"),a()(),r(81,"a",31,5),s(83,"\xA1ya tengo una cuenta!"),a()()()()}},styles:[".page[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%}.page[_ngcontent-%COMP%]   .portada[_ngcontent-%COMP%]{background-image:url(/assets/img/portada_inicio.jpg);background-size:cover;background-position:center;height:700px;width:100%;display:flex;align-items:center;justify-content:right}.portada[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#000;text-align:right;margin-right:250px;width:40%;height:70%;justify-content:center}.info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Poppins-Bold;font-size:50px}.info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Poppins-medium;font-size:30px}.info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:Poppins-medium}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Poppins-Regular}.desc[_ngcontent-%COMP%]{display:flex;width:80%;margin:20px;align-self:center}.desc[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;align-items:center}.gal[_ngcontent-%COMP%]{display:flex;align-self:center;width:80%;justify-content:space-between;margin:50px}.gal[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow:hidden;display:flex;flex-direction:column;width:25%;background-color:#f1e64e;border-radius:15px;align-items:center;text-align:center}.gal[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background-size:cover;width:100%;height:300px;background-position:center}.gal[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#000;width:90%;display:flex;flex-direction:column;align-items:center}.popup[_ngcontent-%COMP%]{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);height:67%;min-height:fit-content;width:25%;background-color:#ffffff90;box-shadow:0 4px 8px #0003;padding:10px;border-radius:15px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.popup[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:poppins-bold;color:#000;align-self:center}.popup[_ngcontent-%COMP%]   .cerrar[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-radius:50%;background-color:#000;transition:.3s}.popup[_ngcontent-%COMP%]   .cerrar[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f1e64e;transition:.3s}.popup[_ngcontent-%COMP%]   .cerrar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;color:#f1e64e;margin:0;line-height:30px;text-align:center;transition:.3s}.popup[_ngcontent-%COMP%]   .cerrar[_ngcontent-%COMP%]:hover   h3[_ngcontent-%COMP%]{color:#000;transition:.3s}.popup[_ngcontent-%COMP%]   .cont[_ngcontent-%COMP%]{margin:auto;display:flex;flex-direction:column;height:70%;width:80%;align-items:center}.popup[_ngcontent-%COMP%]   .cont1[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:none;flex-direction:column;height:70%;width:80%;align-items:center}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:70%}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:poppins-medium;color:#000;margin-top:5px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:25px;width:100%;border-radius:5px;border:1px solid #ffffff00}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:2px solid #f1e64e;outline:none}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:center;margin-top:30px;height:40px;width:170px;font-family:poppins-medium;background-color:#000;border:none;border-radius:7px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f1e64e;color:#000;transition:.5s;cursor:pointer}a[_ngcontent-%COMP%]{margin-top:5px;font-family:poppins-regular;color:#000}a[_ngcontent-%COMP%]:hover{cursor:pointer}"]})};var qe=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-dashboard"]],standalone:!0,features:[M],decls:0,vars:0,template:function(e,n){}})};var Jt="https://ffzsgvasphxakhjarmoj.supabase.co/storage/v1/object/public/plantilla/plantilla.xlsx";var an=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(n){return new(n||i)(p(Oe),p(Ee))}}static{this.\u0275dir=R({type:i})}}return i})(),xt=(()=>{class i extends an{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=De(i)))(o||i)}})()}static{this.\u0275dir=R({type:i,features:[L]})}}return i})(),et=new de("");var An={provide:et,useExisting:ae(()=>ee),multi:!0};function In(){let i=yt()?yt().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var kn=new de(""),ee=(()=>{class i extends an{constructor(e,n,o){super(e,n),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!In())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(n){return new(n||i)(p(Oe),p(Ee),p(kn,8))}}static{this.\u0275dir=R({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,o){n&1&&m("input",function(h){return o._handleInput(h.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(h){return o._compositionEnd(h.target.value)})},features:[se([An]),L]})}}return i})();function Nn(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}var Dt=new de(""),sn=new de("");function Rn(i){return Nn(i.value)?{required:!0}:null}function Zt(i){return null}function ln(i){return i!=null}function cn(i){return Nt(i)?Vt(i):i}function dn(i){let t={};return i.forEach(e=>{t=e!=null?P(P({},t),e):t}),Object.keys(t).length===0?null:t}function pn(i,t){return t.map(e=>e(i))}function Tn(i){return!i.validate}function un(i){return i.map(t=>Tn(t)?t:e=>t.validate(e))}function jn(i){if(!i)return null;let t=i.filter(ln);return t.length==0?null:function(e){return dn(pn(e,t))}}function Et(i){return i!=null?jn(un(i)):null}function Bn(i){if(!i)return null;let t=i.filter(ln);return t.length==0?null:function(e){let n=pn(e,t).map(cn);return At(n).pipe(Te(dn))}}function Ot(i){return i!=null?Bn(un(i)):null}function Xt(i,t){return i===null?[t]:Array.isArray(i)?[...i,t]:[i,t]}function Un(i){return i._rawValidators}function Hn(i){return i._rawAsyncValidators}function Mt(i){return i?Array.isArray(i)?i:[i]:[]}function Qe(i,t){return Array.isArray(i)?i.includes(t):i===t}function Yt(i,t){let e=Mt(t);return Mt(i).forEach(o=>{Qe(e,o)||e.push(o)}),e}function Kt(i,t){return Mt(t).filter(e=>!Qe(i,e))}var Je=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Et(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ot(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Ce=class extends Je{get formDirective(){return null}get path(){return null}},ke=class extends Je{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ze=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Gn={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ao=H(P({},Gn),{"[class.ng-submitted]":"isSubmitted"}),te=(()=>{class i extends Ze{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(p(ke,2))}}static{this.\u0275dir=R({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,o){n&2&&_t("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[L]})}}return i})(),ne=(()=>{class i extends Ze{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(p(Ce,10))}}static{this.\u0275dir=R({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,o){n&2&&_t("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[L]})}}return i})();var Pe="VALID",$e="INVALID",ge="PENDING",Ve="DISABLED",ve=class{},Xe=class extends ve{constructor(t,e){super(),this.value=t,this.source=e}},Ae=class extends ve{constructor(t,e){super(),this.pristine=t,this.source=e}},Ie=class extends ve{constructor(t,e){super(),this.touched=t,this.source=e}},_e=class extends ve{constructor(t,e){super(),this.status=t,this.source=e}};function mn(i){return(tt(i)?i.validators:i)||null}function Ln(i){return Array.isArray(i)?Et(i):i||null}function hn(i,t){return(tt(t)?t.asyncValidators:i)||null}function Wn(i){return Array.isArray(i)?Ot(i):i||null}function tt(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function zn(i,t,e){let n=i.controls;if(!(t?Object.keys(n):n).length)throw new je(1e3,"");if(!n[e])throw new je(1001,"")}function qn(i,t,e){i._forEachChild((n,o)=>{if(e[o]===void 0)throw new je(1002,"")})}var Ye=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=we(()=>this.statusReactive()),this.statusReactive=Se(void 0),this._pristine=we(()=>this.pristineReactive()),this.pristineReactive=Se(!0),this._touched=we(()=>this.touchedReactive()),this.touchedReactive=Se(!1),this._events=new Re,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Y(this.statusReactive)}set status(t){Y(()=>this.statusReactive.set(t))}get valid(){return this.status===Pe}get invalid(){return this.status===$e}get pending(){return this.status==ge}get disabled(){return this.status===Ve}get enabled(){return this.status!==Ve}get pristine(){return Y(this.pristineReactive)}set pristine(t){Y(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return Y(this.touchedReactive)}set touched(t){Y(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Yt(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Yt(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Kt(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Kt(t,this._rawAsyncValidators))}hasValidator(t){return Qe(this._rawValidators,t)}hasAsyncValidator(t){return Qe(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(H(P({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new Ie(!0,n))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=t.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:n})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n),e&&t.emitEvent!==!1&&this._events.next(new Ie(!1,n))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(H(P({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new Ae(!1,n))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=t.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),e&&t.emitEvent!==!1&&this._events.next(new Ae(!0,n))}markAsPending(t={}){this.status=ge;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new _e(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(H(P({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ve,this.errors=null,this._forEachChild(o=>{o.disable(H(P({},t),{onlySelf:!0}))}),this._updateValue();let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Xe(this.value,n)),this._events.next(new _e(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(H(P({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Pe,this._forEachChild(n=>{n.enable(H(P({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(H(P({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pe||this.status===ge)&&this._runAsyncValidator(n,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Xe(this.value,e)),this._events.next(new _e(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(H(P({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ve:Pe}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=ge,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let n=cn(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,o)=>n&&n._find(o),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,n){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||n)&&this._events.next(new _e(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,n)}_initObservables(){this.valueChanges=new V,this.statusChanges=new V}_calculateStatus(){return this._allControlsDisabled()?Ve:this.errors?$e:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ge)?ge:this._anyControlsHaveStatus($e)?$e:Pe}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let n=!this._anyControlsDirty(),o=this.pristine!==n;this.pristine=n,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),o&&this._events.next(new Ae(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Ie(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){tt(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Ln(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Wn(this._rawAsyncValidators)}},Ke=class extends Ye{constructor(t,e,n){super(mn(e),hn(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){qn(this,!0,t),Object.keys(t).forEach(n=>{zn(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(n=>{let o=this.controls[n];o&&o.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,o)=>{n.reset(t?t[o]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>n._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,n,o)=>((n.enabled||this.disabled)&&(e[o]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((o,l)=>{n=e(n,o,l)}),n}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var St=new de("CallSetDisabledState",{providedIn:"root",factory:()=>wt}),wt="always";function $n(i,t){return[...t.path,i]}function fn(i,t,e=wt){gn(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(i.disabled),Jn(i,t),Xn(i,t),Zn(i,t),Qn(i,t)}function en(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Qn(i,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function gn(i,t){let e=Un(i);t.validator!==null?i.setValidators(Xt(e,t.validator)):typeof e=="function"&&i.setValidators([e]);let n=Hn(i);t.asyncValidator!==null?i.setAsyncValidators(Xt(n,t.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let o=()=>i.updateValueAndValidity();en(t._rawValidators,o),en(t._rawAsyncValidators,o)}function Jn(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&_n(i,t)})}function Zn(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&_n(i,t),i.updateOn!=="submit"&&i.markAsTouched()})}function _n(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Xn(i,t){let e=(n,o)=>{t.valueAccessor.writeValue(n),o&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function Yn(i,t){i==null,gn(i,t)}function Kn(i,t){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function ei(i){return Object.getPrototypeOf(i.constructor)===xt}function ti(i,t){i._syncPendingControls(),t.forEach(e=>{let n=e.control;n.updateOn==="submit"&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function ni(i,t){if(!t)return null;Array.isArray(t);let e,n,o;return t.forEach(l=>{l.constructor===ee?e=l:ei(l)?n=l:o=l}),o||n||e||null}var ii={provide:Ce,useExisting:ae(()=>J)},Fe=Promise.resolve(),J=(()=>{class i extends Ce{get submitted(){return Y(this.submittedReactive)}constructor(e,n,o){super(),this.callSetDisabledState=o,this._submitted=we(()=>this.submittedReactive()),this.submittedReactive=Se(!1),this._directives=new Set,this.ngSubmit=new V,this.form=new Ke({},Et(e),Ot(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Fe.then(()=>{let n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),fn(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Fe.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Fe.then(()=>{let n=this._findContainer(e.path),o=new Ke({});Yn(o,e),n.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Fe.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){Fe.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),ti(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(n){return new(n||i)(p(Dt,10),p(sn,10),p(St,8))}}static{this.\u0275dir=R({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,o){n&1&&m("submit",function(h){return o.onSubmit(h)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[se([ii]),L]})}}return i})();function tn(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function nn(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var oi=class extends Ye{constructor(t=null,e,n){super(mn(e),hn(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),tt(e)&&(e.nonNullable||e.initialValueIsDefault)&&(nn(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){tn(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){tn(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){nn(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var ri={provide:ke,useExisting:ae(()=>Z)},on=Promise.resolve(),Z=(()=>{class i extends ke{constructor(e,n,o,l,h,N){super(),this._changeDetectorRef=h,this.callSetDisabledState=N,this.control=new oi,this._registered=!1,this.name="",this.update=new V,this._parent=e,this._setValidators(n),this._setAsyncValidators(o),this.valueAccessor=ni(this,l)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Kn(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){fn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){on.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let n=e.isDisabled.currentValue,o=n!==0&&bt(n);on.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?$n(e,this._parent):[e]}static{this.\u0275fac=function(n){return new(n||i)(p(Ce,9),p(Dt,10),p(sn,10),p(et,10),p(Tt,8),p(St,8))}}static{this.\u0275dir=R({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[se([ri]),L,gt]})}}return i})(),ie=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=R({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return i})();var ai={provide:et,useExisting:ae(()=>oe),multi:!0};function Cn(i,t){return i==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function si(i){return i.split(":")[0]}var oe=(()=>{class i extends xt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let n=this._getOptionId(e),o=Cn(n,e);this.setProperty("value",o)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){let n=si(e);return this._optionMap.has(n)?this._optionMap.get(n):e}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=De(i)))(o||i)}})()}static{this.\u0275dir=R({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,o){n&1&&m("change",function(h){return o.onChange(h.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[se([ai]),L]})}}return i})(),be=(()=>{class i{constructor(e,n,o){this._element=e,this._renderer=n,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(Cn(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(p(Ee),p(Oe),p(oe,9))}}static{this.\u0275dir=R({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})(),li={provide:et,useExisting:ae(()=>vn),multi:!0};function rn(i,t){return i==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function ci(i){return i.split(":")[0]}var vn=(()=>{class i extends xt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let n;if(Array.isArray(e)){let o=e.map(l=>this._getOptionId(l));n=(l,h)=>{l._setSelected(o.indexOf(h.toString())>-1)}}else n=(o,l)=>{o._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{let o=[],l=n.selectedOptions;if(l!==void 0){let h=l;for(let N=0;N<h.length;N++){let ce=h[N],mt=this._getOptionValue(ce.value);o.push(mt)}}else{let h=n.options;for(let N=0;N<h.length;N++){let ce=h[N];if(ce.selected){let mt=this._getOptionValue(ce.value);o.push(mt)}}}this.value=o,e(o)}}_registerOption(e){let n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){let n=ci(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=De(i)))(o||i)}})()}static{this.\u0275dir=R({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,o){n&1&&m("change",function(h){return o.onChange(h.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[se([li]),L]})}}return i})(),ye=(()=>{class i{constructor(e,n,o){this._element=e,this._renderer=n,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(rn(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(rn(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(p(Ee),p(Oe),p(vn,9))}}static{this.\u0275dir=R({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})();var di=(()=>{class i{constructor(){this._validator=Zt}ngOnChanges(e){if(this.inputName in e){let n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):Zt,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=R({type:i,features:[gt]})}}return i})();var pi={provide:Dt,useExisting:ae(()=>le),multi:!0};var le=(()=>{class i extends di{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=bt,this.createValidator=e=>Rn}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=De(i)))(o||i)}})()}static{this.\u0275dir=R({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,o){n&2&&kt("required",o._enabled?"":null)},inputs:{required:"required"},features:[se([pi]),L]})}}return i})();var ui=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ft({type:i})}static{this.\u0275inj=ht({})}}return i})();var $=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:St,useValue:e.callSetDisabledState??wt}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ft({type:i})}static{this.\u0275inj=ht({imports:[ui]})}}return i})();var it=class i{destinatario;onSave=new V;onClose=new V;tempNombre="";tempSnombre="";tempAppaterno="";tempApmaterno="";tempEmail="";ngOnInit(){this.tempNombre=this.capitalize(this.destinatario.nombre),this.tempSnombre=this.capitalize(this.destinatario.snombre),this.tempAppaterno=this.capitalize(this.destinatario.appaterno),this.tempApmaterno=this.capitalize(this.destinatario.apmaterno),this.tempEmail=this.destinatario.email.toLowerCase()}capitalize(t){return t?t.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):""}save(){this.destinatario.nombre=this.tempNombre,this.destinatario.snombre=this.tempSnombre,this.destinatario.appaterno=this.tempAppaterno,this.destinatario.apmaterno=this.tempApmaterno,this.destinatario.email=this.tempEmail,this.onSave.emit(this.destinatario)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-edit-destinatario"]],inputs:{destinatario:"destinatario"},outputs:{onSave:"onSave",onClose:"onClose"},standalone:!0,features:[M],decls:38,vars:6,consts:[[1,"modal-overlay"],[1,"modal-content"],[1,"modal-header"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["for","nombre"],["id","nombre","name","nombre","required","",3,"ngModelChange","ngModel"],["for","snombre"],["id","snombre","name","snombre",3,"ngModelChange","ngModel"],["for","appaterno"],["id","appaterno","name","appaterno","required","",3,"ngModelChange","ngModel"],["for","apmaterno"],["id","apmaterno","name","apmaterno",3,"ngModelChange","ngModel"],["for","email"],["id","email","name","email","required","","type","email",1,"input-email",3,"ngModelChange","ngModel"],["for","telefono"],["id","telefono","name","telefono","required","","type","tel",3,"ngModelChange","ngModel"],[1,"button-row"],["type","submit"],["type","button",3,"click"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),s(4,"Editar Destinatario"),a()(),r(5,"form",3),m("ngSubmit",function(){return n.save()}),r(6,"div",4)(7,"div",5)(8,"label",6),s(9,"Nombre:"),a(),r(10,"input",7),O("ngModelChange",function(l){return E(n.tempNombre,l)||(n.tempNombre=l),l}),a()(),r(11,"div",5)(12,"label",8),s(13,"Segundo Nombre:"),a(),r(14,"input",9),O("ngModelChange",function(l){return E(n.tempSnombre,l)||(n.tempSnombre=l),l}),a()()(),r(15,"div",4)(16,"div",5)(17,"label",10),s(18,"Apellido Paterno:"),a(),r(19,"input",11),O("ngModelChange",function(l){return E(n.tempAppaterno,l)||(n.tempAppaterno=l),l}),a()(),r(20,"div",5)(21,"label",12),s(22,"Apellido Materno:"),a(),r(23,"input",13),O("ngModelChange",function(l){return E(n.tempApmaterno,l)||(n.tempApmaterno=l),l}),a()()(),r(24,"div",4)(25,"div",5)(26,"label",14),s(27,"Email:"),a(),r(28,"input",15),O("ngModelChange",function(l){return E(n.tempEmail,l)||(n.tempEmail=l),l}),a()(),r(29,"div",5)(30,"label",16),s(31,"Tel\xE9fono:"),a(),r(32,"input",17),O("ngModelChange",function(l){return E(n.destinatario.telefono,l)||(n.destinatario.telefono=l),l}),a()()(),r(33,"div",18)(34,"button",19),s(35,"Guardar"),a(),r(36,"button",20),m("click",function(){return n.onClose.emit()}),s(37,"Cancelar"),a()()()()()),e&2&&(c(10),D("ngModel",n.tempNombre),c(4),D("ngModel",n.tempSnombre),c(5),D("ngModel",n.tempAppaterno),c(4),D("ngModel",n.tempApmaterno),c(5),D("ngModel",n.tempEmail),c(4),D("ngModel",n.destinatario.telefono))},dependencies:[k,$,ie,ee,te,ne,le,Z,J],styles:[".modal-content[_ngcontent-%COMP%]{background:#0c0c0c;color:#f1e64e;padding:20px;border-radius:10px;width:50%;font-family:poppins-regular}.modal-header[_ngcontent-%COMP%]{background-color:#f1e64e;padding:5px;border-radius:10px 10px 0 0}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#000;text-align:center;font-size:1.2em}.modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:30px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;justify-content:center;align-items:center}.form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem}.form-group[_ngcontent-%COMP%]{flex:1;margin:0 15px}.button-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:1rem}.button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:20px}.modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:15px}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-family:poppins-regular}.modal-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #f1e64e;border-radius:5px;box-sizing:border-box}"]})};var Me=class i{constructor(t){this.http=t}apiUrl="http://localhost:3020/api/dest/";uploadFile(t){let e=new FormData;return e.append("file",t),this.http.post(this.apiUrl+"subirExcel",e)}getDest(){return this.http.get(this.apiUrl+"getDest")}subirDestinatario(t){return this.http.post(this.apiUrl+"addDest",t)}editarDestinatario(t){return this.http.patch(`${this.apiUrl}updateDestInfo/${t.rut}`,t)}static \u0275fac=function(e){return new(e||i)(G(q))};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})};var re=class i{constructor(t){this.http=t}apiUrl="http://localhost:3020/api/cam/";getCam(){return this.http.get(this.apiUrl+"getCampanas")}editarCampana(t){return this.http.patch(`${this.apiUrl}updateCampana/${t.id_campana}`,t)}crearCampana(t){return this.http.post(`${this.apiUrl}createCampana`,t)}crearEmailCampana(t){return this.http.post(`${this.apiUrl}createEmailCampana`,t)}static \u0275fac=function(e){return new(e||i)(G(q))};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})};var Q=class i{constructor(t){this.http=t}apiUrl="http://localhost:3020/api/dif/";getDifusion(){return this.http.get(this.apiUrl+"getDif")}getDetalleDifusion(t){return this.http.get(this.apiUrl+"getDestDif/"+t)}getDestinatariosCampana(t){return this.http.get(this.apiUrl+"getDetDif/"+t)}subirDifusion(t,e){return this.http.post(this.apiUrl+"createDif/"+t,e)}borrarDif(t,e){return console.log("rut en service:",e),this.http.put(this.apiUrl+"delDif/"+t,{rut:e})}static \u0275fac=function(e){return new(e||i)(G(q))};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})};var mi=["fileInput"],hi=["popup"],fi=["closeBtn"];function gi(i,t){if(i&1){let e=w();r(0,"button",33),m("click",function(){_(e);let o=g().$implicit,l=g();return C(l.openEditDest(o))}),u(1,"i",37),a()}}function _i(i,t){if(i&1){let e=w();r(0,"button",33),m("click",function(){_(e);let o=g().$implicit,l=g();return C(l.eliminarDestinatario(o))}),u(1,"i",38),a()}}function Ci(i,t){if(i&1){let e=w();r(0,"tr")(1,"td")(2,"input",34),m("change",function(o){let l=_(e).$implicit,h=g();return C(h.onCheckboxChange(o,l.rut))}),a()(),r(3,"td"),s(4),v(5,"titlecase"),a(),r(6,"td"),s(7),v(8,"titlecase"),v(9,"titlecase"),v(10,"titlecase"),v(11,"titlecase"),a(),r(12,"td",35),s(13),a(),r(14,"td"),s(15),a(),r(16,"td"),y(17,gi,2,0,"button",36)(18,_i,2,0,"button",36),a()()}if(i&2){let e=t.$implicit,n=g();c(2),d("value",e.rut)("checked",n.selectedRuts.includes(e.rut)),c(2),pe("",n.formatRut(e.rut),"-",x(5,12,e.dvrut),""),c(3),ue(" ",x(8,14,e.nombre)," ",x(9,16,e.snombre)," ",x(10,18,e.appaterno)," ",x(11,20,e.apmaterno)," "),c(6),f(e.email),c(2),f(e.telefono),c(2),d("ngIf",n.isDestinatarioAntiguo(e.rut)),c(),d("ngIf",n.isDestinatarioAntiguo(e.rut))}}function vi(i,t){i&1&&(r(0,"tr")(1,"td",39),s(2,"No hay destinatarios disponibles."),a()())}function bi(i,t){if(i&1){let e=w();r(0,"app-edit-destinatario",40),m("onSave",function(o){_(e);let l=g();return C(l.editarDestinatario(o))})("onClose",function(){_(e);let o=g();return C(o.isModalOpen=!1)}),a()}if(i&2){let e=g();d("destinatario",e.selectedDestinatario)}}function yi(i,t){if(i&1&&(r(0,"option",41),s(1),v(2,"titlecase"),a()),i&2){let e=t.$implicit;d("ngValue",e.id_campana),c(),f(x(2,2,e.nombre))}}var at=class i{constructor(t,e,n){this.serviceDest=t;this.serviceCam=e;this.serviceDif=n}fileInput;popup;closeBtn;ngAfterViewInit(){this.closeBtn.nativeElement.addEventListener("click",()=>{this.popup.nativeElement.style.display="none"})}ngOnInit(){this.mostrarDest(),this.mostrarCam()}selectedCampana=0;listCam=[];listDest=[];listDestProv=[];selectedRuts=[];selectedDestinatario=null;isModalOpen=!1;convertir(){let t=this.fileInput.nativeElement.files[0];t?this.serviceDest.uploadFile(t).subscribe(e=>{console.log("respuesta service:",e);let n=new Set(this.listDestProv.map(o=>o.rut));e.forEach(o=>{console.log("item:",o),o.rut&&o.nombre&&o.snombre&&o.appaterno&&o.apmaterno&&o.email&&o.telefono?(o.dvrut=o.rut[o.rut.length-1],o.rut=o.rut.slice(0,-1),n.has(o.rut)||this.listDestProv.push(o)):console.error("El contenido del archivo no es admisible para el modelo de datos")}),this.selectedRuts=e.filter(o=>this.listDestProv.some(l=>l.rut===o.rut)).map(o=>o.rut),this.limpiarFileInput()},e=>{console.error("Error:",e)}):console.error("Por favor, selecciona un archivo.")}formatRut(t){return t?t.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}mostrarDest(){this.listDestProv=[],this.serviceDest.getDest().subscribe(t=>{this.listDest=t,this.listDest.forEach(e=>{this.listDestProv.push(e)})},t=>{console.error("Error:",t)})}isDestinatarioAntiguo(t){return this.listDest.some(e=>e.rut===t)}subirDestinatarios(){this.listDestProv.filter(e=>!this.listDest.some(n=>n.rut===e.rut)).forEach(e=>{this.darFormatoUpper(e),this.serviceDest.subirDestinatario(e).subscribe(n=>{console.log("Destinatario subido con \xE9xito:",n),this.listDest=[],this.reset(),this.mostrarDest()},n=>{console.error("Error al subir destinatario:",n)})})}darFormatoUpper(t){t.dvrut=t.dvrut.toUpperCase(),t.nombre=t.nombre.toUpperCase(),t.snombre=t.snombre.toUpperCase(),t.appaterno=t.appaterno.toUpperCase(),t.apmaterno=t.apmaterno.toUpperCase(),t.email=t.email.toUpperCase()}limpiarFileInput(){this.fileInput.nativeElement.value=""}reset(){this.limpiarFileInput(),this.listDestProv=this.listDestProv.filter(t=>this.listDest.includes(t)),this.selectedRuts=[]}descargarPlantilla(){let t=Jt,e=document.createElement("a");e.href=t,e.download="plantilla_destinatarios.xlsx",document.body.appendChild(e),e.click(),document.body.removeChild(e)}openEditDest(t){this.listDestProv.length!==this.listDest.length?confirm("Guarda los cambios antes de editar.")||(this.isModalOpen=!1):(this.selectedDestinatario=P({},t),this.isModalOpen=!0)}editarDestinatario(t){t&&(this.darFormatoUpper(t),this.serviceDest.editarDestinatario(t).subscribe(e=>{console.log("Destinatario editado con \xE9xito:",e),this.mostrarDest()},e=>{console.error("Error al editar destinatario:",e)})),this.isModalOpen=!1,this.selectedDestinatario=null}eliminarDestinatario(t){t&&confirm(`Est\xE1 seguro de que desea eliminar a ${t.nombre} ${t.appaterno}? Rut: ${t.rut}-${t.dvrut}`)&&(t.activo=!1,this.darFormatoUpper(t),this.serviceDest.editarDestinatario(t).subscribe(n=>{console.log("Destinatario eliminado con \xE9xito:",n),this.mostrarDest()},n=>{console.error("Error al editar destinatario:",n)}))}onCheckboxChange(t,e){t.target.checked?(this.selectedRuts.push(e),console.log("selectedRuts",JSON.stringify(this.selectedRuts))):(this.selectedRuts=this.selectedRuts.filter(n=>n!==e),console.log("selectedRuts",JSON.stringify(this.selectedRuts)))}toggleSelectAll(t){let e=t.target.checked;this.selectedRuts=e?this.listDestProv.map(n=>n.rut):[]}cambioCampana(t){console.log("idCam seleccionado:",this.selectedCampana)}crearDifusion(){this.selectedRuts.length!==0&&this.selectedCampana!==0?this.filtrarDestDif(this.selectedCampana,this.selectedRuts).subscribe(t=>{if(t.length>0)try{let e={ruts:t};this.serviceDif.subirDifusion(this.selectedCampana,e).subscribe(n=>{console.log("Lista de difusi\xF3n creada con \xE9xito:",n),this.selectedCampana=0,this.selectedRuts=[],this.popup.nativeElement.style.display="none"},n=>{console.error("Error al crear la lista de difusi\xF3n:",n)})}catch(e){console.log("Error al crear la lista de difusi\xF3n:",e)}else console.log("No hay RUTs filtrados para crear la lista de difusi\xF3n."),this.selectedCampana=0,this.selectedRuts=[],this.popup.nativeElement.style.display="none"}):console.log("Falta informaci\xF3n para crear lista de difusi\xF3n")}mostrarCam(){this.serviceCam.getCam().subscribe(t=>{this.listCam=t},t=>{console.error("Error al cargar campa\xF1as:",t)})}openCrear(){this.popup.nativeElement.style.display="flex"}filtrarDestDif(t,e){return this.serviceDif.getDetalleDifusion(t).pipe(Te(n=>{console.log("difusion",n);let o=e.filter(l=>!n.some(h=>h.rut===l));return console.log("RUTs filtrados:",o),o}),It(n=>(console.error("Error al obtener detalle de difusi\xF3n:",n),Ft([]))))}static \u0275fac=function(e){return new(e||i)(p(Me),p(re),p(Q))};static \u0275cmp=b({type:i,selectors:[["app-destinatarios"]],viewQuery:function(e,n){if(e&1&&(F(mi,5),F(hi,5),F(fi,5)),e&2){let o;A(o=I())&&(n.fileInput=o.first),A(o=I())&&(n.popup=o.first),A(o=I())&&(n.closeBtn=o.first)}},standalone:!0,features:[M],decls:62,vars:7,consts:[["fileInput",""],["popup",""],["closeBtn",""],["cont",""],["rel","stylesheet","href",X`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css`],[1,"page"],[1,"top-elements"],[1,"left-elements"],[1,"icono-archivo"],[1,"fas","fa-download",3,"click"],[1,"upload-title"],[1,"right-elements"],[1,"drop"],["type","file","id","fileInput","accept",".xls, .xlsx"],[1,"drop-buttons"],["id","convertir",3,"click"],["id","deshacer",3,"click"],[1,"cont"],[1,"nav_table"],[3,"click","disabled"],[1,"upload",3,"click"],[1,"table-container"],["type","checkbox",3,"change","checked"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"destinatario","onSave","onClose",4,"ngIf"],["id","popup",1,"popup"],[1,"cerrar"],["id","closeBtn"],["id","cont",1,"cont"],["for","selectCampana"],["id","selectCampana","name","select",3,"ngModelChange","change","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"click"],["type","checkbox",3,"change","value","checked"],[1,"email-container"],[3,"click",4,"ngIf"],[1,"fas","fa-edit"],[1,"fas","fa-trash-alt"],["colspan","6"],[3,"onSave","onClose","destinatario"],[3,"ngValue"]],template:function(e,n){if(e&1){let o=w();u(0,"link",4),r(1,"div",5)(2,"div",6)(3,"div",7)(4,"button",8)(5,"i",9),m("click",function(){return _(o),C(n.descargarPlantilla())}),a()(),r(6,"h4",10),s(7,"Descargar plantilla excel"),a()(),r(8,"div",11)(9,"h4",10),s(10,"Cargar m\xFAltiples destinatarios con archivo excel (.xlsx)"),a(),r(11,"div",12),u(12,"input",13,0),r(14,"div",14)(15,"button",15),m("click",function(){return _(o),C(n.convertir())}),s(16,"A\xF1adir a la tabla"),a(),r(17,"button",16),m("click",function(){return _(o),C(n.reset())}),s(18,"Deshacer cambios"),a()()()()(),r(19,"div",17)(20,"div",18)(21,"button",19),m("click",function(){return _(o),C(n.openCrear())}),s(22,"Agregar a campa\xF1a"),a(),r(23,"button",20),m("click",function(){return _(o),C(n.subirDestinatarios())}),s(24,"Guardar Cambios"),a()(),r(25,"div",21)(26,"table")(27,"thead")(28,"tr")(29,"th")(30,"input",22),m("change",function(h){return _(o),C(n.toggleSelectAll(h))}),a()(),r(31,"th"),s(32,"Rut"),a(),r(33,"th"),s(34,"Nombre"),a(),r(35,"th"),s(36,"Email"),a(),r(37,"th"),s(38,"Tel\xE9fono"),a(),r(39,"th"),s(40,"Acciones"),a()()(),r(41,"tbody"),y(42,Ci,19,22,"tr",23)(43,vi,3,0,"tr",24),a()()()()(),y(44,bi,1,1,"app-edit-destinatario",25),r(45,"div",26,1)(47,"div",27)(48,"h3",28,2),s(50,"X"),a()(),r(51,"div",29,3)(53,"h2"),s(54,"Seleccione la campa\xF1a:"),a(),r(55,"form")(56,"label",30),s(57,"Campa\xF1a:"),a(),r(58,"select",31),O("ngModelChange",function(h){return _(o),E(n.selectedCampana,h)||(n.selectedCampana=h),C(h)}),m("change",function(h){return _(o),C(n.cambioCampana(h))}),y(59,yi,3,4,"option",32),a(),r(60,"button",33),m("click",function(){return _(o),C(n.crearDifusion())}),s(61,"Agregar a lista"),a()()()()}e&2&&(c(21),d("disabled",n.selectedRuts.length===0),c(9),d("checked",n.selectedRuts.length===n.listDestProv.length),c(12),d("ngForOf",n.listDestProv),c(),d("ngIf",n.listDest.length===0),c(),d("ngIf",n.isModalOpen&&n.selectedDestinatario),c(14),D("ngModel",n.selectedCampana),c(),d("ngForOf",n.listCam))},dependencies:[k,j,z,me,it,$,ie,be,ye,oe,te,ne,Z,J],styles:[".page[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;height:100%;width:100%}.top-elements[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;align-items:center;text-align:center}.right-elements[_ngcontent-%COMP%]{width:70%;margin-bottom:50px;margin-left:10%;margin-right:15%}.left-elements[_ngcontent-%COMP%]{width:30%;margin-bottom:50px;margin-left:15%;margin-right:10%}.icono-archivo[_ngcontent-%COMP%]{font-size:100px;color:#f1e64e;background-color:transparent;border:transparent;cursor:pointer}.upload-title[_ngcontent-%COMP%]{color:#f1e64e;margin-bottom:10px;text-align:center;font-family:poppins-medium}.drop[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;height:150px;text-align:center;justify-content:space-between;margin:0 auto}.drop[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:2px #f1e64e;border-style:dashed;background-color:#000;width:100%;height:70%;cursor:pointer}.drop-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.drop[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:40px;width:48%;cursor:pointer;margin:5%}.cont[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:1200px}.cont[_ngcontent-%COMP%]   .nav_table[_ngcontent-%COMP%]{width:220px;margin-left:auto;height:40px;display:flex;justify-content:space-between;width:100%}.cont[_ngcontent-%COMP%]   .nav_table[_ngcontent-%COMP%]{width:290px;margin-left:auto;height:40px;display:flex;justify-content:space-between}.nav_table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:center;width:140px;height:30px;border-radius:5px;border:1px solid #f1e64e;background-color:#000;transition:.3s;margin-left:auto}.nav_table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{cursor:pointer;color:#000;background-color:#f1e64e;transition:.3s}.nav_table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#555;color:#ccc;cursor:not-allowed;opacity:.6}.table-container[_ngcontent-%COMP%]{border:1px solid #f1e64e;border-radius:10px;width:100%;max-width:1200px;margin:0 auto;overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}thead[_ngcontent-%COMP%]{border-bottom:1px solid #f1e64e}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#0c0c0c;font-family:poppins-medium;color:#f1e64e;font-size:15px;padding:10px;text-align:center}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-family:poppins-regular;font-size:13px;padding:10px;border-bottom:1px solid #f1e64e}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#363636;transition:.3s}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#0c0c0c;transition:.5s}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1e64e;color:#000;transition:.5s}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left}.email-container[_ngcontent-%COMP%]{text-transform:lowercase}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 5px;height:30px;width:30px;border:none;background:none;cursor:pointer}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:#f1e64e}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1e64e;color:#000}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000}.popup[_ngcontent-%COMP%]{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);height:35%;min-height:fit-content;width:40%;background-color:#ffffff90;box-shadow:0 4px 8px #0003;padding:10px;border-radius:15px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);justify-content:center;align-items:center}.popup[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:poppins-bold;color:#000;align-self:center;text-align:center}.popup[_ngcontent-%COMP%]   .cerrar[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;display:flex;align-items:center;justify-content:center;width:30px;height:30px;border-radius:50%;background-color:#000;transition:.3s}.popup[_ngcontent-%COMP%]   .cerrar[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f1e64e;transition:.3s}.popup[_ngcontent-%COMP%]   .cerrar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;color:#f1e64e;margin:0;line-height:30px;text-align:center;transition:.3s}.popup[_ngcontent-%COMP%]   .cerrar[_ngcontent-%COMP%]:hover   h3[_ngcontent-%COMP%]{color:#000;transition:.3s}.popup[_ngcontent-%COMP%]   .cont[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:70%;width:80%}.cont[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{align-self:center;display:flex;flex-direction:column;width:60%}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#0c0c0c;font-family:poppins-regular}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:30px;background-color:#0c0c0c}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:center;margin-top:30px;height:40px;width:170px;font-family:poppins-medium;background-color:#000;border:none;border-radius:7px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f1e64e;color:#000;transition:.5s;cursor:pointer}"]})};function Mi(i,t){if(i&1&&(r(0,"option",10),s(1),a()),i&2){let e=t.$implicit;d("value",e),c(),f(e)}}var st=class i{campana;onSave=new V;onClose=new V;currentDate;tempNombre="";availableHours=[];minDate="";constructor(){let t=new Date;this.currentDate=t.toISOString().split("T")[0],this.generateAvailableHours()}ngOnInit(){this.tempNombre=this.campana.nombre.toLowerCase().split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ");let t=new Date,e=new Date(t);e.setDate(t.getDate()+1),this.minDate=e.toISOString().split("T")[0]}save(){this.campana.nombre=this.tempNombre,this.onSave.emit(this.campana)}generateAvailableHours(){for(let n=8;n<=22;n++)for(let o of[0,15,30,45]){if(n===22&&o>0)break;this.availableHours.push(`${n.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`)}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-edit-campana"]],inputs:{campana:"campana"},outputs:{onSave:"onSave",onClose:"onClose"},standalone:!0,features:[M],decls:34,vars:8,consts:[[1,"modal-overlay"],[1,"modal-content"],[1,"modal-header"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["for","nombre"],["id","nombre","name","nombre","required","",3,"ngModelChange","ngModel"],["for","tipo"],["id","tipo","name","tipo","required","",3,"ngModelChange","ngModel"],[3,"value"],["for","fecha"],["id","fecha","name","fecha","required","","type","date",3,"ngModelChange","ngModel","min"],["for","hora"],["id","hora","name","hora","required","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"button-row"],["type","submit"],["type","button",3,"click"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),s(4,"Editar Campa\xF1a"),a()(),r(5,"form",3),m("ngSubmit",function(){return n.save()}),r(6,"div",4)(7,"div",5)(8,"label",6),s(9,"Nombre:"),a(),r(10,"input",7),O("ngModelChange",function(l){return E(n.tempNombre,l)||(n.tempNombre=l),l}),a()(),r(11,"div",5)(12,"label",8),s(13,"Tipo de Campa\xF1a:"),a(),r(14,"select",9),O("ngModelChange",function(l){return E(n.campana.id_tipo_campana,l)||(n.campana.id_tipo_campana=l),l}),r(15,"option",10),s(16,"SMS"),a(),r(17,"option",10),s(18,"Email"),a()()()(),r(19,"div",4)(20,"div",5)(21,"label",11),s(22,"Fecha Programada:"),a(),r(23,"input",12),O("ngModelChange",function(l){return E(n.campana.fecha_programada,l)||(n.campana.fecha_programada=l),l}),a()(),r(24,"div",5)(25,"label",13),s(26,"Hora Programada:"),a(),r(27,"select",14),O("ngModelChange",function(l){return E(n.campana.hora_programada,l)||(n.campana.hora_programada=l),l}),y(28,Mi,2,2,"option",15),a()()(),r(29,"div",16)(30,"button",17),s(31,"Guardar"),a(),r(32,"button",18),m("click",function(){return n.onClose.emit()}),s(33,"Cancelar"),a()()()()()),e&2&&(c(10),D("ngModel",n.tempNombre),c(4),D("ngModel",n.campana.id_tipo_campana),c(),d("value",1),c(2),d("value",2),c(6),D("ngModel",n.campana.fecha_programada),d("min",n.minDate),c(4),D("ngModel",n.campana.hora_programada),c(),d("ngForOf",n.availableHours))},dependencies:[k,j,$,ie,be,ye,ee,oe,te,ne,le,Z,J],styles:[".modal-content[_ngcontent-%COMP%]{background:#0c0c0c;color:#f1e64e;padding:20px;border-radius:10px;width:50%;font-family:poppins-regular}.modal-header[_ngcontent-%COMP%]{background-color:#f1e64e;padding:5px;border-radius:10px 10px 0 0}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#000;text-align:center;font-size:1.2em}.modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:30px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;justify-content:center;align-items:center}.form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem}.form-group[_ngcontent-%COMP%]{flex:1;margin:0 15px}.button-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:1rem}.button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:20px}.modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:15px}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-family:poppins-regular}.modal-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #f1e64e;border-radius:5px;box-sizing:border-box;text-transform:capitalize}"]})};function xi(i,t){if(i&1&&(r(0,"option",25),s(1),a()),i&2){let e=t.$implicit;d("value",e),c(),f(e)}}var lt=class i{campana;onCreate=new V;onClose=new V;currentDate;availableHours=[];email={asunto:"",contenido:"",correo_remitente:"send@massive.com"};minDate="";constructor(){let t=new Date;this.currentDate=t.toISOString().split("T")[0],this.generateAvailableHours()}ngOnInit(){let t=new Date,e=new Date(t);e.setDate(t.getDate()+1),this.minDate=e.toISOString().split("T")[0]}save(){let t={campana:this.campana,email:this.email};this.onCreate.emit(t)}generateAvailableHours(){for(let n=8;n<=22;n++)for(let o of[0,15,30,45]){if(n===22&&o>0)break;this.availableHours.push(`${n.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`)}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-create-campana"]],inputs:{campana:"campana"},outputs:{onCreate:"onCreate",onClose:"onClose"},standalone:!0,features:[M],decls:52,vars:10,consts:[[1,"modal-overlay"],[1,"modal-content"],[1,"modal-header"],[3,"ngSubmit"],[1,"flex-container"],[1,"section"],[1,"form-row"],[1,"form-group"],["for","nombre"],["id","nombre","name","nombre","required","",3,"ngModelChange","ngModel"],["for","tipo"],["id","tipo","name","tipo","required","",3,"ngModelChange","ngModel"],[3,"ngValue"],["for","fecha"],["id","fecha","name","fecha","required","","type","date",3,"ngModelChange","ngModel","min"],["for","hora"],["id","hora","name","hora","required","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","asunto"],["id","asunto","name","asunto","required","",3,"ngModelChange","ngModel"],["for","mensaje"],["id","mensaje","name","mensaje","required","",3,"ngModelChange","ngModel"],[1,"button-row"],["type","submit"],["type","button",3,"click"],[3,"value"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),s(4,"Crear Campa\xF1a"),a()(),r(5,"form",3),m("ngSubmit",function(){return n.save()}),r(6,"div",4)(7,"div",5)(8,"h3"),s(9,"Datos de la Campa\xF1a"),a(),r(10,"div",6)(11,"div",7)(12,"label",8),s(13,"Nombre:"),a(),r(14,"input",9),O("ngModelChange",function(l){return E(n.campana.nombre,l)||(n.campana.nombre=l),l}),a()()(),r(15,"div",6)(16,"div",7)(17,"label",10),s(18,"Tipo de Campa\xF1a:"),a(),r(19,"select",11),O("ngModelChange",function(l){return E(n.campana.id_tipo_campana,l)||(n.campana.id_tipo_campana=l),l}),r(20,"option",12),s(21,"SMS"),a(),r(22,"option",12),s(23,"Email"),a()()()(),r(24,"div",6)(25,"div",7)(26,"label",13),s(27,"Fecha Programada:"),a(),r(28,"input",14),O("ngModelChange",function(l){return E(n.campana.fecha_programada,l)||(n.campana.fecha_programada=l),l}),a()(),r(29,"div",7)(30,"label",15),s(31,"Hora Programada:"),a(),r(32,"select",16),O("ngModelChange",function(l){return E(n.campana.hora_programada,l)||(n.campana.hora_programada=l),l}),y(33,xi,2,2,"option",17),a()()()(),r(34,"div",5)(35,"h3"),s(36,"Informaci\xF3n para destinatarios"),a(),r(37,"div",6)(38,"div",7)(39,"label",18),s(40,"T\xEDtulo:"),a(),r(41,"input",19),O("ngModelChange",function(l){return E(n.email.asunto,l)||(n.email.asunto=l),l}),a()()(),r(42,"div",6)(43,"div",7)(44,"label",20),s(45,"Mensaje:"),a(),r(46,"textarea",21),O("ngModelChange",function(l){return E(n.email.contenido,l)||(n.email.contenido=l),l}),a()()()()(),r(47,"div",22)(48,"button",23),s(49,"Crear"),a(),r(50,"button",24),m("click",function(){return n.onClose.emit()}),s(51,"Cancelar"),a()()()()()),e&2&&(c(14),D("ngModel",n.campana.nombre),c(5),D("ngModel",n.campana.id_tipo_campana),c(),d("ngValue",1),c(2),d("ngValue",2),c(6),D("ngModel",n.campana.fecha_programada),d("min",n.minDate),c(4),D("ngModel",n.campana.hora_programada),c(),d("ngForOf",n.availableHours),c(8),D("ngModel",n.email.asunto),c(5),D("ngModel",n.email.contenido))},dependencies:[k,j,$,ie,be,ye,ee,oe,te,ne,le,Z,J],styles:[".modal-content[_ngcontent-%COMP%]{background:#0c0c0c;color:#f1e64e;padding:20px;border-radius:10px;width:70%;font-family:poppins-regular;font-size:.9em}.flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.section[_ngcontent-%COMP%]{background:#ffffff1a;padding:15px;border-radius:5px;flex:1;margin:0 10px}textarea[_ngcontent-%COMP%]{height:100px;width:100%;padding:10px;border:1px solid #f1e64e;border-radius:5px;box-sizing:border-box}.email-fields[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .email-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .email-fields[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:.9em}.modal-header[_ngcontent-%COMP%]{background-color:#f1e64e;padding:5px;border-radius:10px 10px 0 0}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#000;text-align:center;font-size:1.2em}.modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:30px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;justify-content:center;align-items:center}.form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem}.form-group[_ngcontent-%COMP%]{flex:1;margin:0 15px}.button-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:1rem}.button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:20px}.modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:15px}.modal-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-family:poppins-regular}.modal-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #f1e64e;border-radius:5px;box-sizing:border-box}"]})};var xe=class i{constructor(t){this.http=t}apiUrl="http://localhost:3020/api/email/";borrarEnv(t){return this.http.put(this.apiUrl+"delEnv/"+t,{})}getEnv(t){return this.http.get(this.apiUrl+"getEnvDif/"+t)}static \u0275fac=function(e){return new(e||i)(G(q))};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})};function Di(i,t){if(i&1&&(r(0,"span"),s(1),a()),i&2){let e=g(2);c(),U("[",e.cantDest,"]")}}function Ei(i,t){if(i&1){let e=w();r(0,"tr")(1,"td"),s(2),a(),r(3,"td"),s(4),a(),r(5,"td",10),s(6),a(),r(7,"td"),s(8),a(),r(9,"td")(10,"button",11),m("click",function(){let o=_(e).$implicit,l=g(2);return C(l.eliminarDestinatario(o))}),u(11,"i",12),a()()()}if(i&2){let e=t.$implicit,n=g(2);c(2),pe("",n.formatRut(e.rut),"-",n.capitalize(e.dvrut),""),c(2),ue(" ",n.capitalize(e.nombre)," ",n.capitalize(e.snombre)," ",n.capitalize(e.appaterno)," ",n.capitalize(e.apmaterno)," "),c(2),f(n.toLower(e.email)),c(2),f(e.telefono)}}function Oi(i,t){i&1&&(r(0,"tr")(1,"td",13),s(2,"No hay destinatarios disponibles."),a()())}function Si(i,t){if(i&1){let e=w();r(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2"),s(4),y(5,Di,2,1,"span",5),a(),r(6,"h3",6),m("click",function(){_(e);let o=g();return C(o.onClose.emit())}),s(7,"\u2716"),a()(),r(8,"div",7)(9,"div",8)(10,"table")(11,"thead")(12,"tr")(13,"th"),s(14,"Rut"),a(),r(15,"th"),s(16,"Nombre"),a(),r(17,"th"),s(18,"Email"),a(),r(19,"th"),s(20,"Tel\xE9fono"),a(),u(21,"th"),a()(),r(22,"tbody"),y(23,Ei,12,8,"tr",9)(24,Oi,3,0,"tr",5),a()()()()()()}if(i&2){let e=g();c(4),U('Destinatarios de "',e.nombreCampana,'" '),c(),d("ngIf",e.cantDest>0),c(18),d("ngForOf",e.listDest),c(),d("ngIf",e.listDest.length===0)}}var ct=class i{constructor(t,e){this.serviceDif=t;this.serviceEnv=e}isModalOpen=!1;listDest=[];campanaSelected=0;nombreCampana="";onClose=new V;cantDest=this.listDest.length;ngOnInit(){this.mostrarDetDif(this.campanaSelected)}capitalize(t){return t?t.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):""}toLower(t){return t?t.toLowerCase():""}formatRut(t){return t?t.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}eliminarDestinatario(t){return Ne(this,null,function*(){console.log("campa\xF1a:",this.campanaSelected),console.log("rut:",t.rut),confirm(`\xBFEst\xE1 seguro de que desea eliminar 
      "${t.nombre} ${t.snombre} ${t.appaterno} ${t.apmaterno} - RUT: ${this.formatRut(t.rut)}-${t.dvrut} "?`)&&(yield this.serviceDif.getDetalleDifusion(this.campanaSelected).subscribe({next:n=>{console.log("Detalle difusion: "+JSON.stringify(n,null,2)),n.forEach(o=>{if(o.rut===t.rut){let l=o.id_difusion;console.log("Id difusion: "+l),this.serviceEnv.borrarEnv(l).subscribe({next:h=>{console.log("envio con id difusion "+l+" eliminado con \xE9xito",h)},error:h=>{console.log("error al eliminar env\xEDo de la difusi\xF3n",h)}})}})},error:n=>{console.log("error al eliminar env\xEDo de la difusi\xF3n",n)}}),yield this.serviceDif.borrarDif(this.campanaSelected,t.rut).subscribe({next:n=>{console.log("destinatario eliminado de la difusi\xF3n con \xE9xito",n),this.mostrarDetDif(this.campanaSelected)},error:n=>{console.log("error al eliminar destinatario de la difusi\xF3n",n)}}))})}mostrarDetDif(t){this.listDest=[],this.serviceDif.getDestinatariosCampana(t).subscribe({next:e=>{this.listDest=e||[],console.log("listDest",this.listDest),this.cantDest=this.getCantDest(this.listDest)},error:e=>{console.log("error al obtener detalle de difusi\xF3n",e)}})}getCantDest(t){return t.length}static \u0275fac=function(e){return new(e||i)(p(Q),p(xe))};static \u0275cmp=b({type:i,selectors:[["app-show-list"]],inputs:{isModalOpen:"isModalOpen",listDest:"listDest",campanaSelected:"campanaSelected",nombreCampana:"nombreCampana"},outputs:{onClose:"onClose"},standalone:!0,features:[M],decls:2,vars:1,consts:[["rel","stylesheet","href",X`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css`],["class","modal-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal-content"],[1,"modal-header"],[4,"ngIf"],[1,"close-btn",3,"click"],[1,"cont"],[1,"table-container"],[4,"ngFor","ngForOf"],[1,"email-container"],[3,"click"],[1,"fas","fa-trash-alt"],["colspan","5"]],template:function(e,n){e&1&&(u(0,"link",0),y(1,Si,25,4,"div",1)),e&2&&(c(),d("ngIf",n.isModalOpen))},dependencies:[k,j,z],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;justify-content:center;align-items:center}.modal-content[_ngcontent-%COMP%]{background:#ffffffb3;color:#f1e64e;padding:20px;border-radius:10px;width:70%;max-height:80%;overflow-y:auto;box-shadow:0 4px 8px #0003}.modal-header[_ngcontent-%COMP%]{font-family:poppins-medium;display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:10px 10px 0 0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1.5em}.close-btn[_ngcontent-%COMP%]{cursor:pointer;font-size:1.5em;color:#000;padding:5px 10px;border-radius:50%;transition:background-color .3s}.close-btn[_ngcontent-%COMP%]:hover{background-color:#d4c92a}.table-container[_ngcontent-%COMP%]{border:1px solid #f1e64e;border-radius:10px;width:100%;overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}thead[_ngcontent-%COMP%]{border-bottom:1px solid #f1e64e}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#0c0c0c;font-family:poppins-medium;color:#f1e64e;font-size:15px;padding:10px;text-align:center}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-family:poppins-regular;font-size:13px;padding:10px;border-bottom:1px solid #f1e64e;color:#fff}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#363636}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#0c0c0c}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1e64e;color:#000}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{color:#000}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 5px;height:30px;width:30px;border:none;background:none;cursor:pointer}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:#f1e64e}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000}"]})};var wi=["popup"],Pi=["cont"],Vi=["cont1"],Fi=["closeBtn"];function Ai(i,t){if(i&1){let e=w();r(0,"button",12),m("click",function(){_(e);let o=g().$implicit,l=g();return C(l.selDataDif(o))}),u(1,"i",15),a()}}function Ii(i,t){if(i&1){let e=w();r(0,"tr")(1,"td"),s(2),v(3,"titlecase"),a(),r(4,"td"),s(5),v(6,"titlecase"),a(),r(7,"td"),s(8),v(9,"date"),a(),r(10,"td"),s(11),v(12,"date"),a(),r(13,"td"),s(14),a(),r(15,"td"),y(16,Ai,2,0,"button",11),r(17,"button",12),m("click",function(){let o=_(e).$implicit,l=g();return C(l.openEditModal(o))}),u(18,"i",13),a(),r(19,"button",12),m("click",function(){let o=_(e).$implicit,l=g();return C(l.eliminarCampana(o))}),u(20,"i",14),a()()()}if(i&2){let e=t.$implicit;c(2),f(x(3,6,e.nombre)),c(3),U(" ",e.id_tipo_campana===1?"SMS":x(6,8,e.id_tipo_campana===2?"Email":"-"),""),c(3),f(W(9,10,e.fecha_creacion,"dd-MM-yyyy")),c(3),f(W(12,13,e.fecha_programada,"dd-MM-yyyy")),c(3),f(e.hora_programada),c(2),d("ngIf",e.id_campana)}}function ki(i,t){i&1&&(r(0,"tr")(1,"td",16),s(2,"No hay campa\xF1as creadas"),a()())}function Ni(i,t){if(i&1&&(r(0,"tr")(1,"td"),s(2),v(3,"titlecase"),a(),r(4,"td"),s(5),v(6,"titlecase"),a(),r(7,"td"),s(8),v(9,"date"),a(),r(10,"td"),s(11),v(12,"date"),a(),r(13,"td"),s(14),a(),r(15,"td"),s(16," En proceso "),r(17,"span",17),u(18,"i",18),a()()()),i&2){let e=t.$implicit;c(2),f(x(3,5,e.nombre)),c(3),U(" ",e.id_tipo_campana===1?"SMS":x(6,7,e.id_tipo_campana===2?"Email":"-"),""),c(3),f(W(9,9,e.fecha_creacion,"dd-MM-yyyy")),c(3),f(W(12,12,e.fecha_programada,"dd-MM-yyyy")),c(3),f(e.hora_programada)}}function Ri(i,t){i&1&&(r(0,"tr")(1,"td",16),s(2,"No hay campa\xF1as en proceso"),a()())}function Ti(i,t){if(i&1){let e=w();r(0,"tr")(1,"td"),s(2),v(3,"titlecase"),a(),r(4,"td"),s(5),v(6,"titlecase"),a(),r(7,"td"),s(8),v(9,"date"),a(),r(10,"td"),s(11),v(12,"date"),a(),r(13,"td"),s(14),a(),r(15,"td")(16,"button")(17,"i",19),m("click",function(){let o=_(e).$implicit,l=g();return C(l.irReporte(o))}),a()()(),r(18,"td"),s(19," Terminada "),r(20,"span",17),u(21,"i",20),a()()()}if(i&2){let e=t.$implicit;c(2),f(x(3,5,e.nombre)),c(3),U(" ",e.id_tipo_campana===1?"SMS":x(6,7,e.id_tipo_campana===2?"Email":"-"),""),c(3),f(W(9,9,e.fecha_creacion,"dd-MM-yyyy")),c(3),f(W(12,12,e.fecha_programada,"dd-MM-yyyy")),c(3),f(e.hora_programada)}}function ji(i,t){i&1&&(r(0,"tr")(1,"td",21),s(2,"No hay campa\xF1as terminadas"),a()())}function Bi(i,t){if(i&1){let e=w();r(0,"app-create-campana",22),m("onCreate",function(o){_(e);let l=g();return C(l.createCampana(o))})("onClose",function(){_(e);let o=g();return C(o.closeCreateModal())}),a()}if(i&2){let e=g();d("campana",e.newCampana)}}function Ui(i,t){if(i&1){let e=w();r(0,"app-edit-campana",23),m("onSave",function(o){_(e);let l=g();return C(l.editarCampana(o))})("onClose",function(){_(e);let o=g();return C(o.closeEditModal())}),a()}if(i&2){let e=g();d("campana",e.selectedCampana)}}function Hi(i,t){if(i&1){let e=w();r(0,"app-show-list",24),m("onClose",function(){_(e);let o=g();return C(o.closeDestinatariosModal())}),a()}if(i&2){let e=g();d("isModalOpen",e.isDestinatariosModalOpen)("listDest",e.listDest)("campanaSelected",e.idCampanaSelected)("nombreCampana",e.nombreCampanaSelected)}}var dt=class i{constructor(t,e,n){this.serviceCam=t;this.serviceDif=e;this.router=n}popup;cont;cont1;closeBtn;ngOnInit(){this.mostrarCam()}newCampana={nombre:"",fecha_creacion:new Date,fecha_programada:new Date,hora_programada:new Date,id_tipo_campana:0,id_estado:3};listCam=[];listCamInProgress=[];listCamTerminada=[];isCreateModalOpen=!1;isEditModalOpen=!1;selectedCampana={id_campana:0,nombre:"",fecha_creacion:new Date,fecha_programada:new Date,hora_programada:new Date,id_tipo_campana:0,id_estado:0};formattedCampana={id_campana:0,nombre:"",fecha_creacion:new Date,fecha_programada:new Date,hora_programada:new Date,id_tipo_campana:0,id_estado:0};listDest=[];isDestinatariosModalOpen=!1;idCampanaSelected=0;nombreCampanaSelected="";mostrarCam(){this.listCam=[],this.listCamInProgress=[],this.listCamTerminada=[],this.serviceCam.getCam().subscribe(t=>{t.forEach(e=>{e.id_estado!=4&&(e.id_estado==3?this.listCam.push(e):e.id_estado==2?this.listCamInProgress.push(e):e.id_estado==1&&this.listCamTerminada.push(e))})},t=>{console.error("Error:",t)}),console.log("lista BD:",this.listCam)}formatCampana(t){return this.formattedCampana.id_campana=t.id_campana,this.formattedCampana.nombre=t.nombre,this.formattedCampana.fecha_creacion=t.fecha_creacion,this.formattedCampana.fecha_programada=t.fecha_programada,this.formattedCampana.hora_programada=t.hora_programada,this.formattedCampana.id_tipo_campana=t.id_tipo_campana,this.formattedCampana.id_estado=t.id_estado,this.formattedCampana}openCreateModal(){this.isCreateModalOpen=!0}closeCreateModal(){this.isCreateModalOpen=!1}clearCampana(t){t.id_campana=0,t.nombre="",t.fecha_creacion=new Date,t.fecha_programada=new Date,t.hora_programada=new Date,t.id_tipo_campana=0,t.id_estado=0}clearEmail(t){t.asunto="",t.contenido=""}createCampana(t){this.isCreateModalOpen=!1,t&&t.campana&&(t.campana.nombre=t.campana.nombre.toUpperCase(),this.serviceCam.crearCampana(t.campana).subscribe(e=>{console.log("Campa\xF1a creada con \xE9xito:",e),this.serviceCam.getCam().subscribe(n=>{let o=n,l=Math.max(...o.map(h=>h.id_campana).filter(h=>h!==void 0));o.forEach(h=>{h.id_campana===l&&(h.id_tipo_campana===2?(console.log("El tipo de campa\xF1a es de Email"),t.email.id_campana=h.id_campana,console.log("Info email: "+JSON.stringify(t.email)),this.serviceCam.crearEmailCampana(t.email).subscribe(N=>{console.log("Email creado con \xE9xito:",N)},N=>{console.error("Error al crear email:",N)})):h.id_tipo_campana===1&&console.log("El tipo de campa\xF1a es de SMS"),this.mostrarCam(),this.clearCampana(t.campana),this.clearEmail(t.email))})})},e=>{console.error("Error al crear campa\xF1a:",e)}))}openEditModal(t){this.selectedCampana=P({},t),this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1}editarCampana(t){t&&(t=this.formatCampana(t),t.nombre=t.nombre.toUpperCase(),this.serviceCam.editarCampana(t).subscribe(e=>{console.log("Campa\xF1a editada con \xE9xito:",e),this.mostrarCam()},e=>{console.error("Error al editar campa\xF1a:",e)}),this.isEditModalOpen=!1)}eliminarCampana(t){t&&(t=this.formatCampana(t),confirm(`\xBFEst\xE1 seguro de que desea eliminar la campa\xF1a "${t.nombre}"?`)&&(t.id_estado=4,t.nombre=t.nombre.toUpperCase(),this.serviceCam.editarCampana(t).subscribe(n=>{console.log("Campa\xF1a eliminada con \xE9xito:",n),this.mostrarCam()},n=>{console.error("Error al editar campa\xF1a:",n)})))}selDataDif(t){return Ne(this,null,function*(){t.id_campana&&(this.idCampanaSelected=t.id_campana,this.nombreCampanaSelected=t.nombre,yield this.getListDest(t.id_campana),this.isDestinatariosModalOpen=!0)})}closeDestinatariosModal(){this.clearCampana(this.selectedCampana),this.isDestinatariosModalOpen=!1}getListDest(t){this.serviceDif.getDetalleDifusion(t).subscribe({next:e=>{this.listDest=e||[],console.log("listDest",this.listDest)},error:e=>{console.log("error al obtener detalle de difusi\xF3n",e)}})}irReporte(t){this.router.navigate(["/reportes"],{queryParams:{campanaId:t.id_campana}})}static \u0275fac=function(e){return new(e||i)(p(re),p(Q),p(K))};static \u0275cmp=b({type:i,selectors:[["app-campanas"]],viewQuery:function(e,n){if(e&1&&(F(wi,5),F(Pi,5),F(Vi,5),F(Fi,5)),e&2){let o;A(o=I())&&(n.popup=o.first),A(o=I())&&(n.cont=o.first),A(o=I())&&(n.cont1=o.first),A(o=I())&&(n.closeBtn=o.first)}},standalone:!0,features:[M],decls:76,vars:9,consts:[["rel","stylesheet","href",X`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css`],[1,"page"],[1,"cont"],[1,"nav_table"],[1,"upload",3,"click"],[1,"table-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"campana","onCreate","onClose",4,"ngIf"],[3,"campana","onSave","onClose",4,"ngIf"],[3,"isModalOpen","listDest","campanaSelected","nombreCampana","onClose",4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],[1,"fas","fa-edit"],[1,"fas","fa-trash-alt"],[1,"fas","fa-eye"],["colspan","6"],[1,"icono-estado"],[1,"fas","fa-spinner","fa-spin"],["id","icono-file",1,"fas","fa-file-alt",3,"click"],[1,"fas","fa-check"],["colspan","7"],[3,"onCreate","onClose","campana"],[3,"onSave","onClose","campana"],[3,"onClose","isModalOpen","listDest","campanaSelected","nombreCampana"]],template:function(e,n){e&1&&(u(0,"link",0),r(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),s(5,"Campa\xF1as programadas"),a(),r(6,"button",4),m("click",function(){return n.openCreateModal()}),s(7,"+ Nueva Campa\xF1a"),a()(),r(8,"div",5)(9,"table")(10,"thead")(11,"tr")(12,"th"),s(13,"Nombre"),a(),r(14,"th"),s(15,"Tipo campa\xF1a"),a(),r(16,"th"),s(17,"Fecha creaci\xF3n"),a(),r(18,"th"),s(19,"Fecha programada"),a(),r(20,"th"),s(21,"Hora programada"),a(),u(22,"th"),a()(),r(23,"tbody"),y(24,Ii,21,16,"tr",6)(25,ki,3,0,"tr",7),a()()(),u(26,"br")(27,"br"),r(28,"h3"),s(29,"Campa\xF1as en proceso"),a(),r(30,"div",5)(31,"table")(32,"thead")(33,"tr")(34,"th"),s(35,"Nombre"),a(),r(36,"th"),s(37,"Tipo campa\xF1a"),a(),r(38,"th"),s(39,"Fecha creaci\xF3n"),a(),r(40,"th"),s(41,"Fecha programada"),a(),r(42,"th"),s(43,"Hora programada"),a(),r(44,"th"),s(45,"Estado"),a()()(),r(46,"tbody"),y(47,Ni,19,15,"tr",6)(48,Ri,3,0,"tr",7),a()()(),u(49,"br")(50,"br"),r(51,"h3"),s(52,"Campa\xF1as terminadas"),a(),r(53,"div",5)(54,"table")(55,"thead")(56,"tr")(57,"th"),s(58,"Nombre"),a(),r(59,"th"),s(60,"Tipo campa\xF1a"),a(),r(61,"th"),s(62,"Fecha creaci\xF3n"),a(),r(63,"th"),s(64,"Fecha programada"),a(),r(65,"th"),s(66,"Hora programada"),a(),u(67,"th"),r(68,"th"),s(69,"Estado"),a()()(),r(70,"tbody"),y(71,Ti,22,15,"tr",6)(72,ji,3,0,"tr",7),a()()()()(),y(73,Bi,1,1,"app-create-campana",8)(74,Ui,1,1,"app-edit-campana",9)(75,Hi,1,4,"app-show-list",10)),e&2&&(c(24),d("ngForOf",n.listCam),c(),d("ngIf",n.listCam.length===0),c(22),d("ngForOf",n.listCamInProgress),c(),d("ngIf",n.listCamInProgress.length===0),c(23),d("ngForOf",n.listCamTerminada),c(),d("ngIf",n.listCamTerminada.length===0),c(),d("ngIf",n.isCreateModalOpen),c(),d("ngIf",n.isEditModalOpen),c(),d("ngIf",n.isDestinatariosModalOpen))},dependencies:[k,j,z,me,Be,$,st,lt,ct],styles:[".page[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;height:100%;width:100%}.cont[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:1200px}.cont[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:poppins-light;color:#f1e64e;font-size:30px}.cont[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:poppins-regular;margin-top:0}.cont[_ngcontent-%COMP%]   .nav_table[_ngcontent-%COMP%]{margin-left:auto;height:40px;display:flex;justify-content:space-between;width:100%;padding-top:50px}.nav_table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:center;width:180px;height:30px;border-radius:5px;border:1px solid #f1e64e;background-color:#000;transition:.3s}.nav_table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{cursor:pointer;color:#000;background-color:#f1e64e;transition:.3s}.table-container[_ngcontent-%COMP%]{border:1px solid #f1e64e;border-radius:10px;width:100%;max-width:1200px;margin:0 auto;overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}thead[_ngcontent-%COMP%]{border-bottom:1px solid #f1e64e}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#0c0c0c;font-family:poppins-medium;color:#f1e64e;font-size:15px;padding:10px;text-align:center}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-family:poppins-regular;font-size:13px;padding:10px;border-bottom:1px solid #f1e64e}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#363636;transition:.3s}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#0c0c0c;transition:.3s}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1e64e;color:#000;transition:.3s}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 5px;height:30px;width:30px;border:none;background:none;cursor:pointer}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:#f1e64e}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1e64e;color:#000}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000}.icono-estado[_ngcontent-%COMP%]{display:inline-block;color:#fff;border-radius:3px;padding:4px;margin-left:8px}#icono-file[_ngcontent-%COMP%]{font-size:25px}"]})};var pt=class i{constructor(t){this.http=t}apiUrl="http://localhost:3020/api/rep/";getReporte(t){return this.http.get(this.apiUrl+"getReporteEnv/"+t)}static \u0275fac=function(e){return new(e||i)(G(q))};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})};function Li(i,t){i&1&&(r(0,"span"),s(1," Enviado "),u(2,"i",17),a())}function Wi(i,t){i&1&&(r(0,"span"),s(1," Fallido "),u(2,"i",18),a())}function zi(i,t){i&1&&(r(0,"span"),s(1," - "),a())}function qi(i,t){if(i&1&&(Ct(0),y(1,Li,3,0,"span",15)(2,Wi,3,0,"span",15)(3,zi,2,0,"span",15),vt()),i&2){let e=t.ngIf;c(),d("ngIf",e.id_estado===2),c(),d("ngIf",e.id_estado===3),c(),d("ngIf",e.id_estado!==2&&e.id_estado!==3)}}function $i(i,t){i&1&&(Ct(0),s(1," - "),vt())}function Qi(i,t){if(i&1&&(r(0,"tr")(1,"td"),s(2),v(3,"titlecase"),a(),r(4,"td"),s(5),v(6,"titlecase"),v(7,"titlecase"),v(8,"titlecase"),v(9,"titlecase"),a(),r(10,"td",16),s(11),a(),r(12,"td"),y(13,qi,4,3,"ng-container",15)(14,$i,2,0,"ng-container",15),a()()),i&2){let e=t.$implicit,n=g();c(2),pe("",n.formatRut(e.rut),"-",x(3,9,e.dvrut),""),c(3),ue(" ",x(6,11,e.nombre)," ",x(7,13,e.snombre)," ",x(8,15,e.appaterno)," ",x(9,17,e.apmaterno)," "),c(6),f(e.email),c(2),d("ngIf",n.getEnvioDestinatario(e.rut)),c(),d("ngIf",!n.getEnvioDestinatario(e.rut))}}function Ji(i,t){i&1&&(r(0,"tr")(1,"td",19),s(2,"No hay destinatarios disponibles."),a()())}var ut=class i{constructor(t,e,n,o,l,h){this.route=t;this.serviceEnv=e;this.serviceCam=n;this.serviceDif=o;this.serviceDest=l;this.serviceRep=h;this.route.queryParams.subscribe(N=>{let ce=N.campanaId;this.campanaId=Number(ce)})}campanaId=0;reporte={id:0,id_campana:0,nombre_campana:"",fecha_programada:"",hora_programada:"",fecha_envio:"",destinatarios_totales:0,correos_enviados:0,correos_fallidos:0,contenido:"",asunto:"",remitente:"",lista_destinatarios:[],errores:[]};campanas=[];tipoCampana=0;listaDif=[];listaEnv=[];listaDest=[];ngOnInit(){this.obtenerTipoCampana(),this.obtenerDifusionesCampana(),this.obtenerDestinatarios(),this.obtenerReporteCampana()}formatRut(t){return t?t.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""}obtenerReporteCampana(){this.serviceRep.getReporte(this.campanaId).subscribe(t=>{if(t.length>0){let e=t[0];this.reporte.id=e.id,this.reporte.id_campana=e.id_campana,this.reporte.nombre_campana=e.nombre_campana,this.reporte.fecha_programada=e.fecha_programada,this.reporte.hora_programada=e.hora_programada,this.reporte.fecha_envio=e.fecha_envio,this.reporte.destinatarios_totales=e.destinatarios_totales,this.reporte.correos_enviados=e.correos_enviados,this.reporte.correos_fallidos=e.correos_fallidos,this.reporte.contenido=e.contenido,this.reporte.asunto=e.asunto,this.reporte.remitente=e.remitente,this.reporte.lista_destinatarios=JSON.parse(e.lista_destinatarios),this.reporte.errores=JSON.parse(e.errores)}},t=>{console.error("Error al obtener el reporte:",t)})}obtenerDestinatarios(){this.serviceDest.getDest().subscribe(t=>{console.log("Destinatarios response:",t),Array.isArray(t)?t.forEach(e=>{this.reporte.lista_destinatarios.includes(e.email)&&this.listaDest.push(e)}):console.error("La respuesta no es un arreglo:",t)},t=>{console.error("Error al obtener las campa\xF1as:",t)})}obtenerTipoCampana(){this.serviceCam.getCam().subscribe(t=>{Array.isArray(t)?t.forEach(e=>{e.id_campana===this.campanaId&&(this.tipoCampana=e.id_tipo_campana)}):console.error("La respuesta no es un arreglo:",t)},t=>{console.error("Error al obtener las campa\xF1as:",t)})}obtenerDifusionesCampana(){this.serviceDif.getDetalleDifusion(this.campanaId).subscribe(t=>{Array.isArray(t)?t.forEach(e=>{e.id_campana===this.campanaId&&(this.obtenerEnvioCampana(e.id_difusion),this.listaDif.push(e))}):console.error("La respuesta no es un arreglo:",t)},t=>{console.error("Error al obtener las campa\xF1as:",t)})}obtenerEnvioCampana(t){this.serviceEnv.getEnv(this.campanaId).subscribe(e=>{Array.isArray(e)?e.forEach(n=>{n[0].id_difusion===t&&this.listaEnv.push(n[0])}):console.error("La respuesta no es un arreglo:",e)},e=>{console.error("Error al obtener las campa\xF1as:",e)})}getEnvioDestinatario(t){let e=this.listaDif.find(n=>n.rut===t);return e?this.listaEnv.find(o=>o.id_difusion===e.id_difusion):null}static \u0275fac=function(e){return new(e||i)(p(zt),p(xe),p(re),p(Q),p(Me),p(pt))};static \u0275cmp=b({type:i,selectors:[["app-reportes"]],standalone:!0,features:[M],decls:72,vars:22,consts:[["rel","stylesheet","href",X`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css`],[1,"page"],[1,"top-elements"],[1,"report-title"],[1,"email-info"],[1,"email-title"],[1,"email-details"],[1,"email-content"],[1,"info-container"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"cont"],[1,"table-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"email-container"],[1,"fas","fa-check"],[1,"fas","fa-times"],["colspan","4",1,"no-data-row"]],template:function(e,n){e&1&&(u(0,"link",0),r(1,"div",1)(2,"div",2)(3,"h3",3),s(4),v(5,"titlecase"),a(),u(6,"br"),r(7,"div",4)(8,"h4",5),s(9,"Mensaje de la campa\xF1a"),a(),r(10,"div",6)(11,"p")(12,"strong"),s(13,"De:"),a(),s(14),a(),r(15,"p")(16,"strong"),s(17,"Asunto:"),a(),s(18),a(),r(19,"p",7),s(20),a()()(),r(21,"div",8)(22,"div",9)(23,"span",10),s(24,"Tipo de campa\xF1a: "),a(),r(25,"span",11),s(26),v(27,"titlecase"),a()(),r(28,"div",9)(29,"span",10),s(30,"Fecha de env\xEDo: "),a(),r(31,"span",11),s(32),v(33,"date"),a()(),r(34,"div",9)(35,"span",10),s(36,"Fecha de programaci\xF3n: "),a(),r(37,"span",11),s(38),v(39,"date"),a()(),r(40,"div",9)(41,"span",10),s(42,"Cantidad de Enviados: "),a(),r(43,"span",11),s(44),a()(),r(45,"div",9)(46,"span",10),s(47,"Hora de programaci\xF3n: "),a(),r(48,"span",11),s(49),a()(),r(50,"div",9)(51,"span",10),s(52,"Cantidad de Fallidos: "),a(),r(53,"span",11),s(54),a()()()(),u(55,"br"),r(56,"div",12)(57,"div",13)(58,"table")(59,"thead")(60,"tr")(61,"th"),s(62,"Rut"),a(),r(63,"th"),s(64,"Nombre"),a(),r(65,"th"),s(66,"Email"),a(),r(67,"th"),s(68,"Estado"),a()()(),r(69,"tbody"),y(70,Qi,15,19,"tr",14)(71,Ji,3,0,"tr",15),a()()()()()),e&2&&(c(4),U("Reporte ",x(5,12,n.reporte.nombre_campana),""),c(10),U(" ",n.reporte.remitente,""),c(4),U(" ",n.reporte.asunto,""),c(2),f(n.reporte.contenido),c(6),f(n.tipoCampana===1?"SMS":x(27,14,n.tipoCampana===2?"Email":"-")),c(6),f(W(33,16,n.reporte.fecha_envio,"dd/MM/yyyy")),c(6),f(W(39,19,n.reporte.fecha_programada,"dd/MM/yyyy")),c(6),f(n.reporte.correos_enviados),c(5),f(n.reporte.hora_programada.slice(0,-3)),c(5),f(n.reporte.correos_fallidos),c(16),d("ngForOf",n.listaDest),c(),d("ngIf",!n.listaDest.length))},dependencies:[k,j,z,me,Be],styles:['.page[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;height:100%}.top-elements[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:20px auto;padding:0 10px}.report-title[_ngcontent-%COMP%]{font-family:poppins-light;margin-top:0;color:#f1e64e;font-size:20px}.info-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:10px}.info-item[_ngcontent-%COMP%]{flex:1 1 45%;margin:5px;padding:5px;border:1px solid #b3b3b3;border-radius:5px;background-color:#b3b3b3}.info-label[_ngcontent-%COMP%]{font-family:poppins-bold;font-size:14px;color:#333}.info-value[_ngcontent-%COMP%]{color:#333;font-family:poppins-semibold;font-size:14px}.cont[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:1200px}.table-container[_ngcontent-%COMP%]{border:1px solid #f1e64e;border-radius:10px;width:100%;max-width:1200px;margin:0 auto;overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}thead[_ngcontent-%COMP%]{border-bottom:1px solid #f1e64e}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#0c0c0c;font-family:poppins-medium;color:#f1e64e;font-size:15px;padding:10px;text-align:center}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-family:poppins-regular;font-size:13px;padding:10px;border-bottom:1px solid #f1e64e}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#363636;transition:.3s}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#0c0c0c;transition:.5s}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left}.email-container[_ngcontent-%COMP%]{text-transform:lowercase}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 5px;height:30px;width:30px;border:none;background:none;cursor:pointer}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:#f1e64e}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000}.no-data-row[_ngcontent-%COMP%]{text-align:center;padding:10px;background-color:#0c0c0c;color:#f1e64e;font-size:14px}.data-table[_ngcontent-%COMP%]{position:relative}.data-table[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;bottom:0;left:50%;width:2px;background-color:#fff}.email-info[_ngcontent-%COMP%]{max-width:500px;padding:15px;margin-bottom:30px;border:1px solid #ddd;border-radius:8px;background-color:#b3b3b3}.email-title[_ngcontent-%COMP%]{margin:0 0 10px;font-size:18px;color:#333;font-weight:700;font-family:poppins-bold}.email-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-family:poppins-semibold;font-size:14px;color:#0c0c0c}.email-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin:5px 0;font-family:poppins-bold;font-size:14px;color:#0c0c0c;text-decoration:underline}.email-content[_ngcontent-%COMP%]{margin-top:10px;color:#555}']})};var Mn=[{path:"home",component:ze},{path:"dashboard",component:qe},{path:"destinatarios",component:at},{path:"campanas",component:dt},{path:"reportes",component:ut},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"**",redirectTo:"/home"}];var xn={providers:[Bt(),Rt({eventCoalescing:!0}),$t(Mn),Gt()]};var Zi={providers:[Lt(),Ut]},Dn=jt(xn,Zi);var Xi=()=>Ht(We,Dn),Qr=Xi;export{Qr as a};
